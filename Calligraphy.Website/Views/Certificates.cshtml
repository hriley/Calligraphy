@inherits Umbraco.Web.Mvc.UmbracoTemplatePage
@{
    Layout = "Master.cshtml";
    var carouselImages = Model.Content.HasValue("certificatesCaroselImages") ? Model.Content.GetPropertyValue<string>("certificatesCaroselImages").Split(new string[] { "," }, StringSplitOptions.RemoveEmptyEntries).Select(int.Parse) : null;
    var carouselImageObjects = carouselImages != null ? Umbraco.TypedMedia(carouselImages).Where(x => x != null) : null;

    var exampleImages = Model.Content.HasValue("certificateImages") ? Model.Content.GetPropertyValue<string>("certificateImages").Split(new string[] { "," }, StringSplitOptions.RemoveEmptyEntries).Select(int.Parse) : null;
    var exampleImageObjects = exampleImages != null ? Umbraco.TypedMedia(exampleImages).Where(x => x != null) : null;
}

@section Css{
<link href="~/Content/CSS/bootstrap-carousel.css" rel="stylesheet" />
}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<div class="certificates">
    <ul>
        @foreach (var certificate in Model.Content.Parent.Children().Where(x => x.DocumentTypeAlias == "Certificates")) { 
        <li style="display:inline">
            <a href="@certificate.Url" title="@certificate.Name">@certificate.Name</a>
        </li>
        }
    </ul>
    <div class="cert-section-desc">
        <h2>@Model.Content.Name</h2>
        <hr />
        <p>@CurrentPage.certificatesDescription</p>
    </div>
    
    @if (carouselImageObjects != null)
    {
    <div class="cert-section-carousel">
        <div id="myCarousel" class="carousel slide" data-ride="carousel">
            <!-- Indicators -->
            <ol class="carousel-indicators">
                @{
                    int i = 0;
                    string cssClass = "";
                }
                @foreach (var caroselImage in carouselImageObjects)
                {
                    cssClass = i < 1 ? "active" : string.Empty;

                    <li data-target="#myCarousel" data-slide-to="@i.ToString()" class="@cssClass"></li>
                    i++;
                }
            </ol>

            <!-- Wrapper for slides -->
            <div class="carousel-inner">
                @{
                    i = 0;
                    cssClass = "";
                }
                @foreach (var caroselImage in carouselImageObjects)
                {
                    cssClass = i < 1 ? "item active" : "item";
                    <div class="@cssClass">
                        <img src="@caroselImage.Url" alt="@caroselImage.Name" style="width:100%;">
                    </div>
                    i++;
                }
            </div>

            <!-- Left and right controls -->
            <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                <span class="icon-prev"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="right carousel-control" href="#myCarousel" data-slide="next">
                <span class="icon-next"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>
    }

    @if (exampleImageObjects != null)
    {
        
    <div class="cert-showcase">
        @foreach (var exampleImage in exampleImageObjects)
        {
            <div class="cert-showcase-item">
                <img src="@exampleImage.Url" alt="@exampleImage.Name" title="@exampleImage.Name" />
            </div>
        }
    </div>
    <div class="clearBoth"></div>
        
    }
</div>

@section Scripts {
}