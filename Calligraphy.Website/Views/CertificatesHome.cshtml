@inherits Umbraco.Web.Mvc.UmbracoTemplatePage
@{
    Layout = "Master.cshtml";
}

<h1>@Model.Content.Name</h1>
<div>
    <p>@CurrentPage.IntroductionText</p>
    
    @foreach (var certificate in Model.Content.Children().Where(x => x.DocumentTypeAlias == "Certificates"))
    {
        var certImages = certificate.HasValue("certificateImages") ? certificate.GetPropertyValue<string>("certificateImages").Split(new string[] { "," }, StringSplitOptions.RemoveEmptyEntries).Select(int.Parse) : null;
        if (certImages != null)
        {
            var certImage = certImages != null ? Umbraco.TypedMedia(certImages).FirstOrDefault(x => x != null) : null;
        
        <div class="cert-showcase-item">
            <div>
                <a href="@certificate.Url" title="@certImage.Name">@certificate.Name</a>
            </div>
            <a href="@certificate.Url" title="@certImage.Name">
                <img src="@certImage.Url" alt="@certImage.Name" title="@certImage.Name" />
            </a>
        </div>
        }
    }
    
</div>